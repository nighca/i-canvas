define("i-canvas/0.0.1/index",["i-canvas/0.0.1/core","i-canvas/0.0.1/element/rectangle","i-canvas/0.0.1/element/circle","i-canvas/0.0.1/plugin/movable","i-canvas/0.0.1/lib/canvas","i-canvas/0.0.1/lib/element","i-canvas/0.0.1/lib/util","i-canvas/0.0.1/lib/dom","i-canvas/0.0.1/lib/class","i-canvas/0.0.1/lib/lib"],function(t,e,i){var n=t("i-canvas/0.0.1/core");t("i-canvas/0.0.1/element/rectangle"),t("i-canvas/0.0.1/element/circle"),t("i-canvas/0.0.1/plugin/movable"),i.exports=n}),define("i-canvas/0.0.1/core",["i-canvas/0.0.1/lib/canvas","i-canvas/0.0.1/lib/element","i-canvas/0.0.1/lib/util","i-canvas/0.0.1/lib/dom","i-canvas/0.0.1/lib/class","i-canvas/0.0.1/lib/lib"],function(t,e,i){var n=t("i-canvas/0.0.1/lib/canvas"),a=t("i-canvas/0.0.1/lib/element");$.extend(n,{extendElementType:a.extendType,extendElementMethod:a.extendMethod},!0),i.exports=n}),define("i-canvas/0.0.1/element/rectangle",["i-canvas/0.0.1/core","i-canvas/0.0.1/lib/canvas","i-canvas/0.0.1/lib/element","i-canvas/0.0.1/lib/util","i-canvas/0.0.1/lib/dom","i-canvas/0.0.1/lib/class","i-canvas/0.0.1/lib/lib"],function(t){var e=t("i-canvas/0.0.1/core");e.extendElementType("rectangle",{draw:function(t){var e=this.getPos(),i=this.attr;if(i.border){var n=i["border-width"];t.drawRectangle(e.x-n,e.y-n,i.width+2*n,i.height+2*n,i.border)}return i.background&&t.drawRectangle(e.x,e.y,i.width,i.height,i.background),this},containsPoint:function(t,e){var i=this.getPos(),n=this.attr,a=n.border?n["border-width"]:0;return t>=i.x-a&&t<=i.x+n.width+a&&e>=i.y-a&&e<=i.y+n.height+a}})}),define("i-canvas/0.0.1/element/circle",["i-canvas/0.0.1/core","i-canvas/0.0.1/lib/canvas","i-canvas/0.0.1/lib/element","i-canvas/0.0.1/lib/util","i-canvas/0.0.1/lib/dom","i-canvas/0.0.1/lib/class","i-canvas/0.0.1/lib/lib"],function(t){var e=t("i-canvas/0.0.1/core");e.extendElementType("circle",{attr:{radius:0},draw:function(t){var e=this.getPos(),i=this.attr;if(i.border){var n=i["border-width"];t.drawCircle(e.x,e.y,i.radius+n,i.border)}return i.background&&t.drawCircle(e.x,e.y,i.radius,i.background),this},containsPoint:function(t,e){var i=this.getPos(),n=this.attr,a=n.border?n["border-width"]:0,r=Math.pow(t-i.x,2)+Math.pow(e-i.y,2),s=Math.pow(n.radius+a,2);return s>=r}})}),define("i-canvas/0.0.1/plugin/movable",["i-canvas/0.0.1/core","i-canvas/0.0.1/lib/canvas","i-canvas/0.0.1/lib/element","i-canvas/0.0.1/lib/util","i-canvas/0.0.1/lib/dom","i-canvas/0.0.1/lib/class","i-canvas/0.0.1/lib/lib"],function(t){var e=t("i-canvas/0.0.1/core"),i=function(){var t=0,e=0,i=$(window),n=this,a=function(i){n.setAttribute({left:i.offsetX-t,top:i.offsetY-e})},r=function(){i.un("mousemove",a),i.un("mouseup",r)};n.on("mousedown",function(s){s.stopPropagation(),t=s.x-n.getAttribute("left"),e=s.y-n.getAttribute("top"),i.on("mousemove",a),i.on("mouseup",r)})};e.extendElementMethod("movable",i)}),define("i-canvas/0.0.1/lib/canvas",["i-canvas/0.0.1/lib/util","i-canvas/0.0.1/lib/dom","i-canvas/0.0.1/lib/class","i-canvas/0.0.1/lib/lib","i-canvas/0.0.1/lib/element"],function(t,e,i){var n=t("i-canvas/0.0.1/lib/util"),a=t("i-canvas/0.0.1/lib/dom"),r=n.EventEmitter.extend("Canvas",{init:function(t,e){var i=this;i.dom=t,i.ctx=i.dom.getContext(e||"2d"),i.width=t.width,i.height=t.height,i.document=new a({dom:t,width:i.width,height:i.height});var n;i.document.on("dom-event",function(t){["attr-modify","subtree-modify"].indexOf(t.domEvent.type)>=0&&(clearTimeout(n),n=setTimeout(function(){i.draw()},0))}),i.draw()},draw:function(){var t=this,e=t.ctx;e.clearRect(0,0,this.width,this.height),this.document.getRenderQueue().forEach(function(e){e.getAttribute("visible")&&e.draw(t)})},drawRectangle:function(t,e,i,n,a){var r=this.ctx,s=r.fillStyle;r.fillStyle=a,r.fillRect(t,e,i,n),r.fillStyle=s},drawCircle:function(t,e,i,n){var a=this.ctx,r=a.fillStyle;a.fillStyle=n,a.beginPath(),a.arc(t,e,i,0,2*Math.PI,!0),a.closePath(),a.fill(),a.fillStyle=r}});i.exports=r}),define("i-canvas/0.0.1/lib/element",["i-canvas/0.0.1/lib/util","i-canvas/0.0.1/lib/lib","i-canvas/0.0.1/lib/class"],function(t,e,i){var n=t("i-canvas/0.0.1/lib/util"),a=t("i-canvas/0.0.1/lib/lib"),r=n.EventEmitter.extend("Element",{attr:{top:0,left:0,width:0,height:0,background:null,position:"relative","z-index":null,visible:!0,"border-width":0,border:null},init:function(t,e){this.document=t,this.attr=a.extend(this.attr,e),this.children=[],this.__cache__={}},getAttribute:function(t){return this.attr[t]},setAttribute:function(t,e){if("[object String]"===a.type(t))this.attr[t]=e,this.document.fireDomEvent("attr-modify",{target:this,attr:t,val:e});else{var i=this;a.forEach(t,function(t,e){i.setAttribute(e,t)})}return this},show:function(){this.setAttribute("visible",!0)},hide:function(){this.setAttribute("visible",!1)},getPos:function(){var t=this.attr;switch(t.position){case"absolute":return{x:t.left,y:t.top};case"relative":var e=this.parent?this.parent.getPos():{x:0,y:0};return{x:e.x+t.left,y:e.y+t.top};default:return{x:0,y:0}}},getZIndex:function(){return null===this.attr["z-index"]?this.parent?this.parent.getZIndex():0:this.attr["z-index"]},draw:function(){return this},walk:function(t,e){e?(this.children.forEach(function(e){e.walk(t,!0)}),t(this)):(t(this),this.children.forEach(function(e){e.walk(t)}))},appendChild:function(t){return t&&t instanceof r&&this.children.indexOf(t)<0&&(t.parent&&t.parent.removeChild(t),this.children.push(t),t.parent=this,this.document.fireDomEvent("subtree-modify",{target:this,add:t})),this},insertBefore:function(t,e){var i;return t&&t instanceof r&&this.children.indexOf(t)<0&&e&&e instanceof r&&(i=this.children.indexOf(e))>=0&&(t.parent&&t.parent.removeChild(t),this.children.splice(i-1,0,t),t.parent=this,this.document.fireDomEvent("subtree-modify",{target:this,add:t})),this},removeChild:function(t){var e=-1;if(t&&t instanceof r)e=this.children.indexOf(t);else{if("number"!=typeof t)return this;e=t,t=this.children[e]}return e>=0&&(this.children.splice(e,1),t.parent=null,this.document.fireDomEvent("subtree-modify",{target:this,remove:t})),this},containsPoint:function(){return!1},contains:function(t){for(;t;){if(t===this)return!0;t=t.parent}return!1}}),s=function(t,e,i){i=i?r.types[i]:r,e.attr=a.extend(e.attr,i.prototype.attr,!0),r.types[t]=i.extend(t[0].toUpperCase()+t.slice(1),e)},o=function(t,e){return r.prototype[t]=e};a.extend(r,{types:{},extendType:s,extendMethod:o},!0),i.exports=r}),define("i-canvas/0.0.1/lib/util",["i-canvas/0.0.1/lib/class"],function(t,e,i){"use strict";var n=t("i-canvas/0.0.1/lib/class"),a=function(t,e){var i=t.length;switch(i){case 0:case 1:return t;case 2:return e(t[0],t[1])?[t[1],t[0]]:t;default:var n=Math.floor(i/2),r=n,s=i-n,o=a(t.slice(0,n),e),c=a(t.slice(n),e);t=[];for(var l=0,u=0;r-1>=l||s-1>=u;)t.push(l>r-1?c[u++]:u>s-1?o[l++]:e(o[l],c[u])?c[u++]:o[l++]);return t}},r=n.extend("EventEmitter",{on:function(t,e){t=t.toLowerCase();var i=this.__eventGetList__();return(i[t]=i[t]||[]).push(e),this},un:function(t,e){t=t.toLowerCase();var i=this.__eventGetList__(),n=i[t];if(n){e||(i[t]=null);for(var a=[],r=0,s=n.length;s>r;r++)n[r]!==e&&a.push(n[r]);i[t]=a.length?a:null}return this},fire:function(t,e){"[object Object]"===Object.prototype.toString.call(t)&&t.type&&!e&&(e=t,t=e.type),t=t.toLowerCase();var i=this.__eventGetList__(),n=i[t];if(n)for(var a=0,r=n.length;r>a;a++)try{n[a].call(this,e)}catch(s){console.warn(s)}return this},__eventGetList__:function(){return this.__eventList__||(this.__eventList__={}),this.__eventList__}});i.exports={stableSort:a,EventEmitter:r}}),define("i-canvas/0.0.1/lib/dom",["i-canvas/0.0.1/lib/class","i-canvas/0.0.1/lib/util","i-canvas/0.0.1/lib/lib","i-canvas/0.0.1/lib/element"],function(t,e,i){var n=t("i-canvas/0.0.1/lib/class"),a=t("i-canvas/0.0.1/lib/util"),r=t("i-canvas/0.0.1/lib/lib"),s=t("i-canvas/0.0.1/lib/element"),o=n.extend("DomEvent",{prevented:!1,stopped:!1,init:function(t){r.extend(this,t,!0)},preventDefault:function(){this.prevented=!0},stopPropagation:function(){this.stopped=!0}}),c=a.EventEmitter.extend("DomManager",{init:function(t){this.dom=t.dom,this.width=t.width,this.height=t.height,this.clientWidth=this.dom.clientWidth,this.clientHeight=this.dom.clientHeight,this.scaleWidth=this.width/this.clientWidth,this.scaleHeight=this.height/this.clientHeight,this.body=this.createElement("rectangle",{width:this.width,height:this.height,background:"red"}),this.delegateEvents()},createElement:function(t,e){return s.types[t]?new s.types[t](this,e):null},fireDomEvent:function(t,e){var i=new o(r.extend(e,{type:t},!0)),n=i.target;if(n.fire(t,i),["attr-modify","mouseenter","mouseleave"].indexOf(t)<0)for(;n.parent&&!i.stopped;)(n=n.parent).fire(t,i);this.fire("dom-event",{domEvent:i})},getRenderQueue:function(){var t=[];this.body.walk(function(e){e.__cache__.zIndex=null,t.push(e)});var e=function(t){return null!==t.__cache__.zIndex?t.__cache__.zIndex:t.__cache__.zIndex=t.getZIndex()};return t=a.stableSort(t,function(t,i){return e(t)>e(i)})},delegateEvents:function(){var t=this,e=t.dom;["click","drag","drop","mousedown","mousemove","mouseup"].forEach(function(i){e.on(i,function(e){for(var n,a=e.offsetX*t.scaleWidth,r=e.offsetY*t.scaleHeight,s=e,o=t.getRenderQueue(),c=o.length-1;c>=0;c--)if(o[c].containsPoint(a,r)){n=o[c];break}n&&t.fireDomEvent(i,{x:a,y:r,origin:s,target:n})})});var i={};["mouseenter","mousemove","mouseleave"].forEach(function(n){e.on(n,function(e){for(var n,a=e.offsetX*t.scaleWidth,r=e.offsetY*t.scaleHeight,s=e,o=t.getRenderQueue(),c=o.length-1;c>=0;c--)if(o[c].containsPoint(a,r)){n=o[c];break}if(n!==i.target){for(var l=i.target;l&&!l.contains(n);)l=l.parent;for(var u=i.target;u!==l;)t.fireDomEvent("mouseleave",{x:a,y:r,origin:s,target:u}),u=u.parent;for(u=n;u!==l;)t.fireDomEvent("mouseenter",{x:a,y:r,origin:s,target:u}),u=u.parent}i={e:e,target:n}})})}});i.exports=c}),define("i-canvas/0.0.1/lib/class",[],function(require,exports,module){var initializing=!1,fnTest=/xyz/.test(function(){})?/\b_super\b/:/.*/;this.Class=function(){},Class.extend=function(className,prop){prop||(prop=className,className="Anonymous");var _super=this.prototype;initializing=!0;var prototype=new this;initializing=!1;for(var name in prop)prototype[name]="function"==typeof prop[name]&&"function"==typeof _super[name]&&fnTest.test(prop[name])?function(t,e){return function(){var i=this._super;this._super=_super[t];var n=e.apply(this,arguments);return this._super=i,n}}(name,prop[name]):prop[name];var Class=eval("(function "+className+"() {    if ( !initializing && this.init )      this.init.apply(this, arguments);  })");return Class.prototype=prototype,Class.prototype.constructor=Class,Class.extend=arguments.callee,Class},module.exports=Class}),define("i-canvas/0.0.1/lib/lib",[],function(t,e,i){"use strict";var n=Object.prototype.toString.call.bind(Object.prototype.toString),a=function(t,e){if("[object Array]"!==n(t)){for(var i in t)if(t.hasOwnProperty(i)&&e.call(this,t[i],i)===!1)return}else for(var a=0,r=t.length;r>a&&e.call(this,t[a],a)!==!1;a++);},r=function(t){if(!t)return t;var e=new t.constructor;return a(t,function(t,i){e[i]=t}),e},s=function(t,e,i){return t=(i?t:r(t))||{},a(e,function(e,i){t[i]=e}),t},o={on:HTMLElement.prototype.addEventListener,un:HTMLElement.prototype.removeEventListener,css:function(t,e){var i=this;return"[object String]"===n(t)?this.style.setProperty(t,e):a(t,function(t,e){i.css(e,t)})},show:function(){this.css("display","")},hide:function(){this.css("display","none")},find:function(t){return l(t,this)},parent:function(){return c(this.parentNode)}},c=function(t){return t?s(t,o,!0):t},l=function(t,e){return c("[object String]"===n(t)?(e||document).querySelector(t):t)},u=function(t,e){return Array.prototype.slice.call("[object String]"===n(t)?(e||document).querySelectorAll(t):t).map(c)};s(l,{type:n,forEach:a,clone:r,extend:s,$:u},!0),"undefined"!=typeof i&&i.exports?i.exports=l:s(window,{$:l,$$:u},!0)});